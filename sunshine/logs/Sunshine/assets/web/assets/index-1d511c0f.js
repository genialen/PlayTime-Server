import{c as r,i as l}from"./_plugin-vue_export-helper-fe085d29.js";import{N as o}from"./Navbar-dbaf0800.js";import{R as h}from"./ResourceCard-ea4a7cba.js";console.log("Hello, Sunshine!");let n=r({components:{Navbar:o,ResourceCard:h},data(){return{version:null,githubVersion:null,nightlyData:null,loading:!0,logs:null}},async created(){try{this.version=(await fetch("/api/config").then(i=>i.json())).version,this.githubVersion=await fetch("https://api.github.com/repos/LizardByte/Sunshine/releases/latest").then(i=>i.json()),this.buildVersionIsNightly&&(this.nightlyData=(await fetch("https://api.github.com/repos/LizardByte/Sunshine/actions/workflows/CI.yml/runs?branch=nightly&event=push&exclude_pull_requests=true&per_page=1").then(i=>i.json())).workflow_runs[0])}catch{}try{this.logs=await fetch("/api/logs").then(i=>i.text())}catch(i){console.error(i)}this.loading=!1},computed:{stableBuildAvailable(){if(!this.githubVersion||!this.version)return!1;let i=this.githubVersion.name;i.indexOf("v")===0&&(i=i.substring(1));let t=this.version;if(t.indexOf("v")===0&&(t=t.substring(1)),this.buildVersionIsNightly||this.buildVersionIsDirty){const e=this.version.split(".").slice(0,3).join(".");return this.githubVersion.tag_name.substring(1)>e}return i!==t},nightlyBuildAvailable(){var t;if(!this.nightlyData||this.buildVersionIsStable||this.buildVersionIsDirty)return!1;let i=(t=this.version)==null?void 0:t.split(".").pop();return this.nightlyData.head_sha.indexOf(i)!==0},buildVersionIsDirty(){var i;return((i=this.version)==null?void 0:i.split(".").length)===5&&this.version.indexOf("dirty")!==-1},buildVersionIsNightly(){var i;return((i=this.version)==null?void 0:i.split(".").length)===4},buildVersionIsStable(){var i;return((i=this.version)==null?void 0:i.split(".").length)===3},fancyLogs(){if(!this.logs)return[];let i=/(\[\d{4}:\d{2}:\d{2}:\d{2}:\d{2}:\d{2}\]):\s/g,t=this.logs.split(i).splice(1),e=[];for(let s=0;s<t.length;s+=2)e.push({timestamp:t[s],level:t[s+1].split(":")[0],value:t[s+1]});return e}}});l().then(i=>{n.use(i),n.mount("#app")});
